# 省局产品发展

## 智能纳服注入脚本遗留问题优化
### 背景
终端注入脚本目前缺乏对于单页面工程路由跳转的监听，导致从A功能跳转到B功能时，功能注入配置未更新，目前的解决办法是将B页面的配置写在A功能的配置里，这样的配置方式存在隐患：
 - 多个页面的配置写在一起无法区分难以维护
 - 如果两个页面存在同样的元素时，需要添加更多的父级选择器来指定需要监听的元素
 - 在读取配置项时会轮询不相干的配置项

### 目标
优化注入脚本配置更新方式，增加单页面路由跳转更新配置项的逻辑

### 方案概述
增加url监听，判断为单页面路由跳转时重新获取配置项，同时在配置项中增加路由跳转后的回调函数，用于处理跳转后清除上一个页面中注入的逻辑，避免影响下一个路由的逻辑或展示效果。配置更新流程：

## 智能纳服pad产品前端开发体验优化
### 背景
去年从pad业务开发人员处收到反馈，UED是基于600像素宽度的设备提供的设计稿，但是架构组提供的移动端h5工程模板是遵循总局app的设计规范基于375像素宽度做的移动端适配方案。架构组先是提出修改整个工程适配方案基础值，但是被告知工程中已有的功能是基于375的设计稿开发的，修改会影响之前的功能，所以现状是开发时需要在375像素的基础上将设计稿上的标注的像素进行换算，增加了开发难度。

### 目标
pad功能开发不需要根据不同的设计稿尺寸进行换算, 提升开发效率

### 方案概述
优化h5工程移动端适配方案，保留原来以375像素构建时一次性转换的方案，在此基础上增加根据访问的路由二次在运行时根据配置的宽度重新计算适配设备。
在无法约束设计稿的标准或者标准发生变化时，开发侧只需要配置一下设计稿的宽度

### 业务影响
不影响已有功能，无需修改流水线，无需修改功能地址

## 成品油框架升级
### 背景
为了更好的统一维护前端工程链路，将原数据部成品油使用脚手架 sm-cli 的工程升级至 rth 框架

### 目标
将采集端大屏前端工程[cpy-cjddp-front](https://gd-gitlab.dc.servyou-it.com/dafe/regional-prod/zhejiang-cpy-report.git)迁移至 rth 框架

### 实施
从 master 单独拉个分支进行迁移，迁移完成提 mr，经业务组负责该工程的开发人员评审确认后合并。

### 业务影响
不影响已有功能，无需修改流水线，无需修改功能地址

# 省局研发

## 标准特色上云项目 IE 11 兼容性测试修复
### 背景
2月上旬法电项目组收到局方反馈新电局不兼容 IE 11，目前法电项目组已经安排进行 IE 11 上的全功能的测试收集兼容性问题，3月份排期修复，针对组件内的公共问题，省局标准特色上云工程安排同步修改，同时在 IE 11 上测试是否还有其他兼容性问题。

### 目标
修复标准特色上云项目 IE 11 兼容性问题

### 实施
先根据法电的经验解决掉公共或共性的兼容性问题，然后安排在 IE 11 测试所有功能收集问题，再排期修复

### 业务影响
修复后需要业务组安排功能回测

## 标准特色上云项目pc工程瘦身
### 背景
前端架构组定期对业务工程进行分析确认是否需要治理以及确定治理方向，分析出标准特色上云项目存在资源优化空间

### 目标
减少标准特色上云项目pc工程打包产物体积，预计可减少100k左右（gzip压缩后），最大的js预计可减少至1m以内（gzip压缩后）

### 实施
@sy/province-sdk 支持按需引入改造

### 业务影响
不影响已有功能，无需修改流水线，无需修改功能地址

## 特色上云项目工程复用指导手册
### 背景
原则上特色上云功能要求重新开发，但是在深圳“历史申报表更正、往期申报上云”事项推进中判断申报功能所有历史属期版本都重新开发成本过高，因此决定复用老工程，简单出了一个深圳的老工程如何合并构建部署，如何做云上云下差异化的方案，经验证后需要再将其转化为通用方案，以作为后续其他地区上云老工程复用的指导手册

### 目标
产出通用的特色上云项目工程复用指导手册

### 业务影响
文档产出，不影响业务